# 1. react-redux

---

## 2-1. redux 폴더 구조

![image](https://user-images.githubusercontent.com/63600953/147469508-154d5ee6-7588-4f74-9b93-c85eed717e84.png)

* initialState의 첫번째 depth의 요소들이 action을 나누는 기준이 된다. 
* 이 구조대로 action과 reducer를 나눈다. 


![image](https://user-images.githubusercontent.com/63600953/147469973-95a41a0f-5269-4321-8e82-4f4aa558b50e.png)

* 배열이 될 만한 것들은 바깥으로 빼주는 것이 좋다. 나중에 너무 크기가 커진다. 
* 객체들이 늘어나면 메모리를 차지하긴 하지만, 영향을 줄 만큼 차지하지는 않는다.

## 2-2. combineReducer

* reducer는 새로운 객체를 만들어서 return 해주는 함수이다. (action 생성함수는 각각 함수 별도로 존재해서 분리하기 편했다.)
* reducer를 어떻게 쪼갤까?

![image](https://user-images.githubusercontent.com/63600953/147471346-98a0550c-5f83-492a-83ce-7d98d3d3ee6a.png)

* 함수는 쪼갤 수 없기 때문에 이 부분은 redux에서 메소드로 제공한다. => `combineReducer()`


* `index.js` 에서 `combineReducer()` 를 활용하여 합쳐준다. 
```
combineReducers({
    user : userReducer, 
    posts : postsReducer,
})
```

![image](https://user-images.githubusercontent.com/63600953/147474757-046c8de0-0d5d-48f2-8b06-76aeb3d7674b.png)

## 2-3. 리덕스 미들웨어

: `action` - `dispatch` - `( middleware )` - `reducer` 순으로 진행된다.  

* action 은 객체이기 때문에 기본적으로 모두 동기이다. 
* dispatch 함수는 action을 받아서 dispatch 하는 역할이기 때문에 비동기가 들어갈 틈이 없다. 


* 리덕스 미들웨어 : `redux-thunk`, `redux-saga` <br>
`=>` dispatch와 reducer 사이에 어떠한 동작이던지 할 수 있게 하는 것이 `middleware`
  


###미들 웨어 적용 방법
1. `enhancer` 를 
* `덧붙히다, 증강시키다`의 의미, 미들웨어를 사용할 때 사용한다.
* createStore의 3번째 인자에 들어간다. (첫번째 reducer, 두번째 initialState)
```
const enhancer = compose(
    applyMiddleWare(), 
    
); 
const store = createStore(reducer, initialState, enhancer); 
```