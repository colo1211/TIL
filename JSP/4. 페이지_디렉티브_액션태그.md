# 4. JSP í˜ì´ì§€ ë””ë ‰í‹°ë¸Œ, ì•¡ì…˜ íƒœê·¸

## 4-1. JSP í˜ì´ì§€ ë””ë ‰í‹°ë¸Œ
* include ë””ë ‰í‹°ë¸Œ
* Taglib ë””ë ‰í‹°ë¸Œ - ëª¨ë¸ 2ì—ì„œ í•™ìŠµ

#### include ë””ë ‰í‹°ë¸Œ

* include : í¬í•¨í•˜ë‹¤ <br/>

* í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ì—¬ëŸ¬ ìš”ì†Œë“¤ì„ ë¶ˆëŸ¬ì˜¬ ë•Œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
* ë‹¤ë¥¸ jsp íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ë•Œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
    * ë¦¬ì•¡íŠ¸ë¡œ ë”°ì§€ë©´ ì•½ê°„ ì»´í¬ë„ŒíŠ¸ ëŒì–´ì˜¤ëŠ” ëŠë‚Œ

ğŸ’¡ í•˜ë‚˜ì˜ í˜ì´ì§€ë¡œ ë³€í™˜ë˜ì–´ì„œ ì»´íŒŒì¼ëœë‹¤.

![image](https://user-images.githubusercontent.com/63600953/206902729-3ef58000-2afd-48e3-a6dc-35da3f321eef.png)

```
<%@ include file="íŒŒì¼ëª….jsp" %>
```

`Include.jsp`
```
<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
	<table width="600" border="1">
		<!-- Top -->
		<tr height="150">
			<td width="600" align="center">
			<%@ include file="Top.jsp" %>
			</td>
		</tr>
		
		<!-- center -->
		<tr height="400">
			<td width="600" align="center">
			Center
			</td>
		</tr>
		
		<!-- Bottom -->
		<tr height="100">
			<td width="600" align="center">
			<%@ include file="Bottom.jsp" %>
			</td>
		</tr>
	</table>
</body>
</html>
```



## 4-2. JSP í˜ì´ì§€ ì•¡ì…˜ íƒœê·¸

![image](https://user-images.githubusercontent.com/63600953/208286227-8116dee7-980e-4875-bc8d-e983d105114c.png)

* ì´ì¤‘ì—ì„œ include, forward, useBeanì„ í•™ìŠµí•œë‹¤.

### 1. include

* ì´ì „ ëª©ì°¨ì—ì„œ í•™ìŠµí–ˆë˜ `page include` ì§€ì‹œì–´ì™€ ê¸°ëŠ¥ì´ ì™„ì „íˆ ë™ì¼

ğŸ’¡ `page include` vs `jsp:incldue`
* page include
  * ë‹¨ìˆœíˆ í˜ì´ì§€ë§Œ í•©ì¹˜ëŠ” ì—­í• 
  * í•˜ë‚˜ì˜ í˜ì´ì§€ê°€ í•œë²ˆì— ì‹¤í–‰
  ```
  <%@ include file="Top.jsp" />
  ```
  
* jsp:include 
  * ê°ê°ì˜ JSPê°€ ë”°ë¡œ ì‹¤í–‰ë¨
  * í˜ì´ì§€ë¥¼ ë¶™ì´ëŠ” ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼, ë™ì‹œì— ê°’ì„ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤.  
  * ë”°ë¼ì„œ, paramsë¥¼ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤.
  * `page include`ì™€ì˜ ì°¨ì´ì ì€ page ì†ì„±ì— ê¸°ìˆ ë˜ì–´ìˆëŠ” ê°ê°ì˜ í˜ì´ì§€ì— ê°’ì„ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤.
  * ë§ˆì¹˜, react ìì‹ ì»´í¬ë„ŒíŠ¸ì— Propsë¥¼ ë„˜ê²¨ì£¼ëŠ”ê²ƒê³¼ ë¹„ìŠ·
  
```
  <jsp:include page="Top.jsp">
     <jsp:param name="id" value="aaa"/>
  </jsp:include>
```

### 2. forward ì•¡ì…˜ íƒœê·¸

* `response.sendRedirect()`ì™€ ê¸°ëŠ¥ì´ ìœ ì‚¬
* í˜ì´ì§€ ì‚¬ì´ì˜ ì œì–´ë¥¼ ì´ë™ì‹œí‚¬ë•Œ ì‚¬ìš©
* í˜„ì¬ í˜ì´ì§€ì—ì„œ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚¬ ë•Œ ì‚¬ìš©í•˜ëŠ” ì•¡ì…˜ íƒœê·¸

ğŸ’¡ `response.sendRedirect()` vs `forward`
* response.sendRedirect()
  * ë‹¨ìˆœí•œ í˜ì´ì§€ ì´ë™
  * ë°ì´í„°ë¥¼ url ì£¼ì†Œì°½ì— ê»´ì„œ ì „ì†¡
  * ë°ì´í„°ê°€ ì£½ìŒ
  
* forward
  * ë°ì´í„°ê°€ ê³„ì† ì‚´ì•„ìˆìŒ
  * ë°ì´í„°ë¥¼ êµ³ì´ ì•ˆë„£ì–´ë„ ë¨
  * `jsp:param`ìœ¼ë¡œ ê°’ì„ ë³€ê²½í•´ì„œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
  * ì„ì˜ì˜ ê°’ì„ ë„£ì„ ìˆ˜ ìˆìŒ
  
```
<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
	<h2>ì´ í˜ì´ì§€ëŠ” ë¡œê·¸ì¸ì •ë³´ê°€ ë„˜ì–´ì˜¤ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.</h2>
	<%
		request.setCharacterEncoding("EUC-KR"); // post ë°©ì‹ í•œê¸€ ì²˜ë¦¬
		
		String id = request.getParameter("id");
		
		response.sendRedirect("ResponseRedirect.jsp?id=" + id); // íë¦„ ì œì–´, ì œì–´ê¶Œì´ ResponseRedirectë¡œ ë„˜ì–´ê°„ë‹¤.
	%>
	<jsp:forward page="ResponseRedirect.jsp"></jsp:forward> <!--ë°ì´í„°ê°€ ê·¸ëŒ€ë¡œ ë„˜ì–´ê°€ê¸° ë•Œë¬¸ì— ResponseRedirectì—ì„œ id ì‚¬ìš© ê°€ëŠ¥-->
	<h3><%= id %>ë‹˜ ë°˜ê°€ì›Œìš” </h3>
</body>
</html>
```

### 3. useBean ì•¡ì…˜íƒœê·¸

* ìë°”ë¹ˆì„ JSPì— í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ë•Œ ì‚¬ìš©
* JSPì™€ DBê°„ì— ë°ì´í„°ë¥¼ ì‰½ê²Œ ì£¼ê³  ë°›ê¸° ìœ„í•´ì„œ ì‚¬ìš©
  * ë‚±ê°œë¡œ ì£¼ê³  ë°›ëŠ”ê±°ë³´ë‹¤, ë°•ìŠ¤(`ArrayList`)ì— ì§‘ì–´ ë„£ì–´ì„œ ì£¼ê³  ë°›ëŠ”ê²Œ í¸ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©

* ìë°”ë¹ˆì¦ˆ
  * ì—¬ëŸ¬ê°œì˜ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ì €ì¥ì‹œì¼œë†“ê³  ê·¸ í´ë˜ìŠ¤ë¥¼ ArrayList, Vector ì´ëŸ° ê³³ì— ì €ì¥í•´ì„œ ì‚¬ìš©í•  ë•Œ ì‚¬ìš©
  * DBì— ì €ì¥ë˜ì–´ ìˆëŠ” ì •ë³´ëŠ” ê°€ë³€ ê¸¸ì´ì´ê¸° ë•Œë¬¸
```
<jsp:useBean id="ì´ë¦„" class="íŒ¨í‚¤ì§€ëª….í´ë˜ìŠ¤ëª…"></jsp:useBean>
```


* ìë°” ë¹ˆì¦ˆ

![image](https://user-images.githubusercontent.com/63600953/208290419-a4104227-10a6-4a33-810c-3fdd28df6251.png)
  * Java Resource ë‚´ë¶€ì— íŒ¨í‚¤ì§€ ìƒì„±
  * íŒ¨í‚¤ì§€ ë‚´ë¶€ì— í´ë˜ìŠ¤ ìƒì„±

ğŸ’¡ ìë°” ë¹ˆì¦ˆ ë‚´ë¶€ì— ìˆëŠ” ë©¤ë²„ë³€ìˆ˜ì™€ í¼ë°ì´í„°ì˜ nameê³¼ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ ìë™ìœ¼ë¡œ ë§¤í•‘ì´ ê°€ëŠ¥

`MemberBean.java`
```
package beans;

public class MemberBean {
	// ë°ì´í„° ì€ë‹‰
	private String id;
	private String pw;
	private String email;
	private String tel;
	private String address;
	
	// Getter & Setter
	public String getId() {
		return id;
	}
	public void setId(String id) {
		this.id = id;
	}
	public String getPw() {
		return pw;
	}
	public void setPw(String pw) {
		this.pw = pw;
	}
	public String getEmail() {
		return email;
	}
	public void setEmail(String email) {
		this.email = email;
	}
	public String getTel() {
		return tel;
	}
	public void setTel(String tel) {
		this.tel = tel;
	}
	public String getAddress() {
		return address;
	}
	public void setAddress(String address) {
		this.address = address;
	}	
}
```


`MemberJoinProc.jsp`
```
<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
	<h2>íšŒì› ì •ë³´ ë³´ê¸°</h2>
	<%
		request.setCharacterEncoding("EUC-KR");
	%>
	<jsp:useBean id="test" class="beans.MemberBean"> <!-- MemberBean test = new MemberBean(); -->
		<jsp:setProperty name="test" property="*" /> <!-- ì—¬ê¸°ì—ì„œ í´ë˜ìŠ¤ë¥¼ id ì™€ ìë™ìœ¼ë¡œ ë§¤í•‘ ì‹œí‚´ -->
	</jsp:useBean>
	
	<h2>ë‹¹ì‹ ì˜ idëŠ” <jsp:getProperty name="test" property="id" /> </h2>
	<h2>ë‹¹ì‹ ì˜ pwëŠ” <jsp:getProperty name="test" property="pw" /> </h2>
	<h2>ë‹¹ì‹ ì˜ emailì€ <jsp:getProperty name="test" property="email" /> </h2>
	<h2>ë‹¹ì‹ ì˜ ì „í™”ë²ˆí˜¸ëŠ” <jsp:getProperty name="test" property="tel" /> </h2>
	<h2>ë‹¹ì‹ ì˜ ì£¼ì†ŒëŠ” <jsp:getProperty name="test" property="address" /> </h2>
</body>
</html>
```


![image](https://user-images.githubusercontent.com/63600953/208290892-5714c063-a455-4913-93ed-af75336f95c9.png)

#### getProperty / setProperty

`setProperty`

* ë§Œì•½ì— í¼ë°ì´í„°ì—ì„œ ë°ì´í„°ë¥¼ 15ê°œ ë„˜ê¸´ë‹¤ë©´, `getParameter();`ë¥¼ 15ê°œ ì‚¬ìš©í•´ì•¼í•œë‹¤.
* requestë¡œ ë„˜ì–´ì˜¨ ë°ì´í„°ë¥¼ ìë°” ë¹ˆì¦ˆë‘ ë§µí•‘ ì‹œì¼œì£¼ëŠ” useBean
```
<jsp:useBean id="test" class="beans.MemberBean"> <!-- MemberBean test = new MemberBean(); -->
    <!-- ê°ê°ì˜ ê°’ì„ í•˜ë‚˜ì”© ë„£ì–´ì£¼ëŠ” ë°©ë²•, id ë§Œ ë§µí•‘í•´ì¤€ë‹¤. -->
    <jsp:setProperty name="test" property="id" />
    
    <!-- ëª¨ë“  ë°ì´í„°ë¥¼ í´ë˜ìŠ¤ì— ìë™ìœ¼ë¡œ ë„£ì–´ì¤Œ, *(ëª¨ë‘ ë§¤í•‘ ì‹œí‚´), ëŒ€ì‹  ëª¨ë“  ë©¤ë²„ë³€ìˆ˜ê°€ ë™ì¼í•´ì•¼ í•œë‹¤. -->
    <jsp:setProperty name="test" property="*" /> 
</jsp:useBean>
```

